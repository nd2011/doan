<div class="mt-4">
    <h3>Đăng khoá học</h3>
    <form method="post" action="/courses/store">
        <div class="form-group">
            <label for="name">Tên</label>
            <input type="text" class="form-control" id="name" name="name">
        </div>

        <div class="form-group">
            <label for="description">Mô tả chương trình</label>
            <input type="text" class="form-control" id="description" name="description">
        </div>

        <div class="form-group">
            <label for="youtubeLink">Link YouTube</label>
            <input type="text" class="form-control" id="youtubeLink" placeholder="Dán link YouTube vào đây">
        </div>

        <!-- Input ẩn để lưu videoID gửi về backend -->
        <input type="hidden" id="videoID" name="videoID">

        <div class="form-group">
            <label for="level">Mức độ</label>
            <input type="text" class="form-control" id="level" name="level">
        </div>

        <button type="submit" class="btn btn-primary">Thêm khoá học</button>
    </form>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const youtubeLinkInput = document.getElementById("youtubeLink");
        const videoIDInput = document.getElementById("videoID");

        youtubeLinkInput.addEventListener("input", function () {
            const link = youtubeLinkInput.value.trim();
            let videoID = "";

            try {
                const url = new URL(link);

                if (url.hostname === "youtu.be") {
                    videoID = url.pathname.slice(1);
                } else if (url.hostname.includes("youtube.com")) {
                    videoID = url.searchParams.get("v");
                }

                videoIDInput.value = videoID || "";
            } catch (e) {
                videoIDInput.value = "";
            }
        });
    });
</script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>